<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion de usuarios</title>
    <link rel="stylesheet" href="css/CabeceraRegistro.css">
    <script type="text/javascript" src="js/Mosconten.js"></script>

</head>   <script src="js/Jqueryformulario.js"></script>
<body>
    <nav>
        <ul>
            <img width="250px" height="250px" align="left" src="../img/logo.png">
            <button type="button" class="btn btn-success" style="width: 150px; height: 60px; background-color: rgb(134, 134, 168);"><a href="mostrar.php">Registro</a></button>
        </ul>
    </nav>  
    <br><br>
        <!-- PLATOS FUERTES -->
        <section class="contenido">
            <form action="RegistroEmpleado.php" method="post" class="form-group"  onsubmit="return validateForm()">
                <h1>Usuarios</h1>
                <table>
                    <tr>
                        <td>
                            <div class="form-group" style="text-align: center;">
                                <canvas style="border:black 1px dashed;" id="canvas" width="150px" height="150px"></canvas><br>
                                <input type="file" id="fotoAlum" name="FOTO"  style="display: none;" title="Foto png o jpg" accept=".jpg, .jpeg, .png" multiple tabindex="4"/>
                                <button type="button" id="btnCargarImagen">Cargar Imagenüì∑.</button>
                            </div>
                        </td>
                        <script type="text/javascript">
                            const input = document.getElementById('fotoAlum'); // Arreglo de componentes de la imagen
                            const canvas = document.getElementById('canvas'); // Contenedor del canvas
                            const context = canvas.getContext('2d'); // Contexto 2D del canvas
                            const btnCargarImagen = document.getElementById('btnCargarImagen'); // Bot√≥n de carga de imagen
                        
                            // Evento de cambio de imagen
                            input.addEventListener('change', updateImageDisplay);
                            function updateImageDisplay() {
                                const curFiles = input.files;
                                if (curFiles.length === 0) {
                                    context.clearRect(0, 0, canvas.width, canvas.height);
                                } else {
                                    const file = curFiles[0];
                                    // Validaci√≥n de archivo
                                    if (validFileType(file)) {
                                        const image = new Image();
                                        image.onload = function() {
                                            context.clearRect(0, 0, canvas.width, canvas.height);
                                            context.drawImage(image, 0, 0, canvas.width, canvas.height);
                                        };
                                        image.src = URL.createObjectURL(file);
                                    }
                                }
                            }
                        
                            // Arreglo de formatos permitidos
                            const fileTypes = [
                                "image/apng",
                                "image/bmp",
                                "image/gif",
                                "image/jpeg",
                                "image/pjpeg",
                                "image/png",
                                "image/svg+xml",
                                "image/tiff",
                                "image/webp",
                                "image/x-icon"
                            ];
                        
                            function validFileType(file) {
                                return fileTypes.includes(file.type);
                            }
                        
                            // Evento de clic en el bot√≥n de carga de imagen
                            btnCargarImagen.addEventListener('click', function() {
                                input.click();
                            });
                        </script>
                    <td>
                        <div class="form-group" style="margin-top: -25px;">
                            <label for="ID_EMPLEADO">CI <span id="error_ID_EMPLEADO"></span> </label>
                            <input type="number" name="ID_EMPLEADO" id="ID_EMPLEADO">
                        </div>
                        <div class="form-group">
                            <label for="NOMBRE">NOMBRES <span id="error_NOMBRE"></span></label>
                            <input type="text" name="NOMBRE" id="NOMBRE">
                        </div>
                        <div class="form-group">
                            <label for="APELLIDO_PAT">APELLIDO PATERNO <span id="error_APELLIDO_PAT"></span></label>
                            <input type="text" name="APELLIDO_PAT" id="APELLIDO_PAT">
                        </div>
                        <div class="form-group">
                            <label for="APELLIDO_MAT">APELLIDO MATATERNO <span id="error_APELLIDO_MAT"></span></label>
                            <input type="text" name="APELLIDO_MAT" id="APELLIDO_MAT">
                        </div>
                    </td>
                </tr> 
                <tr>
                    <td colspan="2">
                        <div class="form-group">
                            <label for="F_CONTRATACION">FECHA CONTRATACION <span id="error_F_CONTRATACION"></span></label>
                            <input type="date" name="F_CONTRATACION" name="F_CONTRATACION" style="width: 360px;">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="form-group">
                            <label for="">SEXO: <span id="error_SEXO"></span></label>
                            <select name="SEXO" id="SEXO"style="width: 360px;">
                                <option value="Vacio"></option>
                                <option value="Femenino">Femenino</option>
                                <option value="Masculino">Masculino</option>
                            </select>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="form-group">
                            <label for="">ESPECIALIDAD <span id="error_ESPECIALIDAD"></span></label>
                            <select name="ESPECIALIDAD" id="ESPECIALIDAD" style="width: 360px;">
                                <option value="Vacio"></option>
                                <option value="MAQUILLADOR">MAQUILLADOR</option>
                                <option value="MAQUILLADOR">PEINADOR</option>
                            </select>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="form-group">
                            <label for="TELEFONO">TELEFONO <span id="error_TELEFONO"></span></label>
                            <input type="number" style="width: 355px;" name="TELEFONO" id="TELEFONO" pattern="[67][0-9]{7}">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="form-group">
                            <label for="E_MAIL">E-MAIL <span id="error_E_MAIL"></span></label>
                            <input type="email" style="width: 355px;" name="E_MAIL" id="E_MAIL">
                        </div>
                    </td>
                </tr>
            </table>
            <div style="text-align: center;">
                <button type="submit" class="btn btn-success" value="Guardarüíæ" >Guardarüíæ</button>
            </div>
        </form>
       
    </section>

    <script>
        function validateForm() {
            // Obt√©n el valor del campo ID_EMPLEADO
            var idEmpleado = document.getElementById('ID_EMPLEADO').value;

            var NOMBRE=document.querySelector('#NOMBRE').value;  
            var APELLIDO_PAT=document.querySelector('#APELLIDO_PAT').value;  
            var APELLIDO_MAT=parseInt(document.querySelector('#APELLIDO_MAT').value); 

            /* mensaje de alertas*/
    
            var error_ID_EMPLEADO = document.querySelector('#error_ID_EMPLEADO');

            var error_NOMBRE=document.querySelector('#error_NOMBRE');
            var error_APELLIDO_PAT=document.querySelector('#error_APELLIDO_PAT');
            var error_APELLIDO_MAT=document.querySelector('#error_APELLIDO_MAT');    

            // Verifica si el campo ID_EMPLEADO est√° vac√≠o
            if (idEmpleado.trim() === "") {
                alert("El ID no es v√°lido");
                error_ID_EMPLEADO.innerHTML = "<span id='error_ID_EMPLEADO'> Error‚ö†</span>";
                error_ID_EMPLEADO.style.color = "red";
                return false;
            } else {
                error_ID_EMPLEADO.innerHTML = "<span id='error_ID_EMPLEADO'></span>";
            }

            if (NOMBRE.trim() === "") {  
                alert("Los nombres no son v√°lidos");  
                error_NOMBRE.innerHTML = "<span id='error_NOMBRE'> Error‚ö†</span>";  
                error_NOMBRE.style.color = "red";  
                return false;  
            } else {  
                    error_NOMBRE.innerHTML = "<span id='error_NOMBRE'></span>";  
            }
            if (APELLIDO_PAT.trim() === "") {  
                alert("Los apellido paterno no v√°lido");  
                        error_APELLIDO_PAT.innerHTML="<span id='error_APELLIDO_PAT'> Error‚ö†</span>";  
                        error_APELLIDO_PAT.style.color="red";  
                            return false;  
            } else {  
                error_APELLIDO_PAT.innerHTML = "<span id='APELLIDO_PAT'></span>";  
            }
        }
    </script>
</body>
</html>